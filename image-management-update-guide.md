# 圖片管理系統功能更新說明

## 新增功能總覽

### 1. 年份管理功能
- **數據庫層面**：在 `image_resources` 表添加了 `year` 字段
- **後端服務**：ImageService 支持按年份查詢和分類
- **前端界面**：圖片管理頁面支持年份選擇和新增年份

### 2. 分類獨立顯示
- **首頁橫幅**：限制只能有一張圖片，上傳新圖片會替換舊圖片
- **關於我們**：支持多張圖片上傳和管理
- **隊聚活動**：支持年份分類，可按年份篩選照片
- **移除團隊成員**：從圖片管理中移除，將在團隊管理模組實現

### 3. 用戶界面改進
- **標籤式界面**：每個分類獨立的標籤頁
- **年份選擇器**：隊聚活動支持選擇和新增年份
- **批量操作**：新增年份功能
- **響應式設計**：適配不同屏幕尺寸

## 文件修改清單

### 後端文件
1. **ImageResource.java** - 添加年份字段
2. **ImageResourceRepository.java** - 添加年份相關查詢方法
3. **ImageService.java** - 實現年份功能和首頁橫幅唯一性
4. **AdminController.java** - 支持年份參數處理
5. **ImageApiController.java** - 新增API控制器

### 前端文件
1. **images.html** - 完全重構為標籤式界面

### 數據庫文件
1. **database-update-year.sql** - 數據庫更新腳本

## 功能詳細說明

### 首頁橫幅管理
- **唯一性保證**：系統自動確保只有一張首頁橫幅圖片
- **自動替換**：上傳新圖片時會自動刪除舊圖片
- **用戶提醒**：界面上顯示限制說明

### 隊聚活動照片管理
- **年份分類**：每張照片可以指定所屬年份
- **動態年份**：支持新增年份，年份列表會動態更新
- **篩選功能**：可按年份篩選照片顯示
- **批量管理**：支持同一年份的多張照片管理

### 年份功能
- **年份選擇**：下拉選單顯示現有年份
- **新增年份**：可以添加新的年份到系統中
- **數據遷移**：現有照片已根據描述自動提取年份

## 使用方法

### 上傳首頁橫幅
1. 點擊"首頁橫幅"標籤
2. 點擊"上傳橫幅圖片"按鈕
3. 選擇圖片文件並填寫描述
4. 點擊"上傳"（會自動替換現有圖片）

### 上傳隊聚活動照片
1. 點擊"隊聚活動"標籤
2. 點擊"上傳照片"按鈕
3. 選擇圖片文件
4. 從下拉選單選擇年份，或點擊"新增"添加新年份
5. 填寫描述並上傳

### 新增年份
1. 在隊聚活動標籤中點擊"新增年份"按鈕
2. 輸入年份（2000-2100之間）
3. 點擊"新增"確認

### 按年份篩選
1. 在隊聚活動標籤中使用年份篩選按鈕
2. 點擊特定年份查看該年度的照片
3. 點擊"全部年度"查看所有照片

## 數據庫變更

### 新增字段
```sql
ALTER TABLE image_resources 
ADD COLUMN `year` INT NULL AFTER `description`;
```

### 數據遷移
現有的隊聚活動照片已自動提取年份信息：
- 2020年：1張照片
- 2021年：14張照片
- 2022年：6張照片
- 2023年：3張照片

## API接口

### 新增API端點
- `GET /api/images/{id}` - 獲取單張圖片詳細信息
- `GET /api/images/category/{category}` - 獲取分類圖片
- `GET /api/images/category/{category}/year/{year}` - 獲取指定分類和年份的圖片
- `GET /api/images/years` - 獲取所有可用年份

## 注意事項

1. **首頁橫幅限制**：系統強制只保留一張首頁橫幅圖片
2. **年份格式**：年份必須在 2000-2100 之間
3. **數據備份**：建議在使用前備份數據庫
4. **圖片大小**：確保MySQL配置支持大圖片文件

## 測試建議

1. 測試首頁橫幅的唯一性功能
2. 測試隊聚活動的年份選擇和篩選
3. 測試新增年份功能
4. 驗證現有照片的年份數據遷移
5. 測試各分類的圖片上傳和管理

## 後續擴展

1. 可以考慮添加月份分類
2. 支持批量上傳功能
3. 添加圖片標籤系統
4. 實現圖片搜索功能